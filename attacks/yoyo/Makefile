# Variables
EXE = yoyo_test

# Usual compilation flags
CFLAGS = -Wall -Wextra -g -O3
CPPFLAGS = -I../../include -DDEBUG

# Special rules and targets
.PHONY: all clean help

# Rules and targets
all: yoyo_test

yoyo_test: utils.o yoyo.o yoyo_test.o common.o
	$(CC) $(CFLAGS) -o $@ $^ $(LDFLAGS)
	@rm -f *.o

utils.o: ../../src/utils.c ../../include/utils.h
	$(CC) $(CFLAGS) $(CPPFLAGS) -c $<

common.o: ../../src/common.c ../../include/common.h
	$(CC) $(CFLAGS) $(CPPFLAGS) -c $<

yoyo.o: yoyo.c ../../include/yoyo.h
	$(CC) $(CFLAGS) $(CPPFLAGS) -c $<

yoyo_test.o: yoyo_test.c ../../include/utils.h ../../include/yoyo.h
	$(CC) $(CFLAGS) $(CPPFLAGS) -c $<

clean:
	@rm -f *~ *.o $(EXE)

help:
	@echo "Usage:"
	@echo " make [all]\t\tBuild the software"
	@echo " make clean\t\tRemove all files generated by make"
	@echo " make help\t\tDisplay this help"
